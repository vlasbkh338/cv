function e(e){effector.is.store(e)||f('expect useStore argument to be a store');let t=c.useRef(e),r=c.useState(e.getState())[1];return l(()=>(t.current===e&&r(e.getState()),t.current=e,e.updates.watch(r)),[e]),e.getState()}function t({store:t,keys:r,fn:n}){effector.is.store(t)||f('useStoreMap expects a store'),Array.isArray(r)||f('useStoreMap expects an array as keys'),'function'!=typeof n&&f('useStoreMap expects a function');let o=c.useMemo(()=>effector.createStore(n(t.getState(),r)).on(t,(e,t)=>n(t,r)),r),s=e(o);return l(()=>()=>{o.off(t),effector.clearNode(o,{deep:1})},r),s}function r(e,t){return t.displayName=e,t}function n(e){let t=c.useContext(i);if(!t)throw Error('No scope found, consider adding <Provider> to app root');return t.find(e).meta.wrapped}function o(e,t){return r(`Connect(${t.displayName||t.name||'Unknown'})`,r=>c.createElement(t,Object.assign({},r,s(e))))}function s(t){return e(n(t))}function u(e){let t=c.useContext(i),r=t.find(e),n=effector.is.effect(e)?e=>{let t=(()=>{let e={};return e.req=new Promise((t,r)=>{e.rs=t,e.rj=r}),e})();return effector.launch(r,{params:e,req:t}),t.req}:e=>(effector.launch(r,e),e);return c.useCallback(n,[t,e])}Object.defineProperty(exports,'__esModule',{value:1});var a,c=(a=require('react'))&&'object'==typeof a&&'default'in a?a.default:a,effector=require('effector');let l='undefined'!=typeof window?c.useLayoutEffect:c.useEffect,f=e=>{throw Error(e)};const i=c.createContext(null);let{Provider:p}=i;exports.Provider=p,exports.connect=e=>t=>o(t,e),exports.createComponent=()=>{throw new Error('not implemented')},exports.createContextComponent=(e,t,r)=>n=>{let o=c.useContext(t),u=s(e);return r(n,u,o)},exports.createReactState=o,exports.createStoreConsumer=e=>t=>{let r=s(e);return t.children(r)},exports.useEvent=u,exports.useGate=(e,t={})=>{let r=u(e.open),n=u(e.close),o=u(e.set);((e,t={})=>{let r=c.useRef(null);l(()=>(e.open(r.current),()=>e.close(r.current)),[e]),((e,t)=>{if(e===t)return 1;if('object'==typeof e&&null!==e&&'object'==typeof t&&null!==t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return 0;for(let n=0;n<r.length;n++){let o=r[n];if(e[o]!==t[o])return 0}return 1}return 0})(r.current,t)||(r.current=t,e.set(t))})(c.useMemo(()=>({open:r,close:n,set:o}),[e,r]),t)},exports.useList=(e,o)=>((e,n)=>{let o,s=[];'object'==typeof n&&null!==n?(n.keys&&(s=n.keys),o=n.fn):o=n,effector.is.store(e)||f('expect useList first argument to be a store'),'function'!=typeof o&&f("expect useList's renderItem to be a function"),Array.isArray(s)||f("expect useList's keys to be an array");let u=c.useMemo(()=>{let n=r((e.shortName||'Unknown')+".Item",({index:r,keys:n})=>{let o=t({store:e,keys:[r,...n],fn:(e,t)=>e[t[0]]});return l.current(o,r)});return c.memo(n)},[e]),a=t({store:e,keys:[e],fn:e=>e.length}),l=c.useRef(o);l.current=o;let i=c.useMemo(()=>s,s);return Array.from({length:a},(e,t)=>c.createElement(u,{index:t,key:t,keys:i}))})(n(e),o),exports.useStore=s,exports.useStoreMap=({store:e,keys:r,fn:o})=>t({store:n(e),keys:r,fn:o});
//# sourceMappingURL=ssr.js.map
