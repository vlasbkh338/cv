((e,t)=>{'object'==typeof exports&&'undefined'!=typeof module?t(exports,require('react'),require('effector')):'function'==typeof define&&define.amd?define(['exports','react','effector'],t):t((e=e||self).effectorReact={},e.React,e.effector)})(this,(e,t,effector)=>{function r(e){effector.is.store(e)||f('expect useStore argument to be a store');let r=t.useRef(e),n=t.useState(e.getState())[1];return c(()=>(r.current===e&&n(e.getState()),r.current=e,e.updates.watch(n)),[e]),e.getState()}function n({store:e,keys:n,fn:o}){effector.is.store(e)||f('useStoreMap expects a store'),Array.isArray(n)||f('useStoreMap expects an array as keys'),'function'!=typeof o&&f('useStoreMap expects a function');let s=t.useMemo(()=>effector.createStore(o(e.getState(),n)).on(e,(e,t)=>o(t,n)),n),a=r(s);return c(()=>()=>{s.off(e),effector.clearNode(s,{deep:1})},n),a}function o(e,t){return t.displayName=e,t}function s(e,n){function s(e){let o=t.useRef(e),s=r(a);c(()=>(l({props:o.current,state:a.getState()}),()=>{i({props:o.current,state:a.getState()})}),[]);let u=n(e,s);return o.current=e,u}let a;effector.is.store(e)?a=e:'object'==typeof e&&null!==e?a=effector.combine(e):f('shape should be a store or object with stores');let u='Unknown';a&&a.shortName&&(u=a.shortName);let l=effector.createEvent(),i=effector.createEvent();return s.mounted=l,s.unmounted=i,o(u+".View",s)}function a(e,n){return o(`Connect(${n.displayName||n.name||'Unknown'})`,o=>t.createElement(n,Object.assign({},o,r(e))))}function u(e,r={}){let n=t.useRef(null);c(()=>(e.open(n.current),()=>e.close(n.current)),[e]),((e,t)=>{if(e===t)return 1;if('object'==typeof e&&null!==e&&'object'==typeof t&&null!==t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return 0;for(let n=0;n<r.length;n++){let o=r[n];if(e[o]!==t[o])return 0}return 1}return 0})(n.current,r)||(n.current=r,e.set(r))}t=t&&{}.hasOwnProperty.call(t,'default')?t.default:t;let c='undefined'!=typeof window?t.useLayoutEffect:t.useEffect,f=e=>{throw Error(e)};e.connect=e=>t=>{let r=e;return'function'!=typeof e&&(r=t,t=e),a(t,r)},e.createComponent=s,e.createContextComponent=(e,n,s)=>o((e.shortName||'Unknown')+".ContextComponent",o=>{let a=t.useContext(n),u=r(e);return s(o,u,a)}),e.createGate=(e="gate",t={})=>{function r(e){return u(r,e),null}let n;'object'==typeof e&&null!==e&&('defaultState'in e&&(t=e.defaultState),e.domain&&(n=e.domain),e=e.name||'gate');let s=effector.createStore(Boolean(0),{named:'status'}),a=effector.createStore(t,{named:'state'}),{set:c}=effector.createApi(a,{set:(e,t)=>t}),{open:f,close:l}=effector.createApi(s,{open:()=>Boolean(1),close:()=>Boolean(0)});if(r.open=f,r.close=l,r.status=s,r.state=a,r.set=c,a.reset(l),n){let{hooks:e}=n;effector.launch({target:[e.store,e.store,e.event,e.event,e.event],params:[s,a,f,l,c]})}return o("Gate:"+e,r)},e.createReactState=a,e.createStoreConsumer=e=>s(e,({children:e},t)=>e(t)),e.useEvent=e=>e,e.useGate=u,e.useList=(e,r)=>{let s,a=[];'object'==typeof r&&null!==r?(r.keys&&(a=r.keys),s=r.fn):s=r,effector.is.store(e)||f('expect useList first argument to be a store'),'function'!=typeof s&&f("expect useList's renderItem to be a function"),Array.isArray(a)||f("expect useList's keys to be an array");let u=t.useMemo(()=>{let r=o((e.shortName||'Unknown')+".Item",({index:t,keys:r})=>{let o=n({store:e,keys:[t,...r],fn:(e,t)=>e[t[0]]});return l.current(o,t)});return t.memo(r)},[e]),c=n({store:e,keys:[e],fn:e=>e.length}),l=t.useRef(s);l.current=s;let i=t.useMemo(()=>a,a);return Array.from({length:c},(e,r)=>t.createElement(u,{index:r,key:r,keys:i}))},e.useStore=r,e.useStoreMap=n,Object.defineProperty(e,'__esModule',{value:1})});
//# sourceMappingURL=effector-react.umd.js.map
