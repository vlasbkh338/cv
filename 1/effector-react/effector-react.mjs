function e(e){i.store(e)||b('expect useStore argument to be a store');let t=l.useRef(e),n=l.useState(e.getState())[1];return h(()=>(t.current===e&&n(e.getState()),t.current=e,e.updates.watch(n)),[e]),e.getState()}function t({store:t,keys:n,fn:r}){i.store(t)||b('useStoreMap expects a store'),Array.isArray(n)||b('useStoreMap expects an array as keys'),'function'!=typeof r&&b('useStoreMap expects a function');let o=l.useMemo(()=>p(r(t.getState(),n)).on(t,(e,t)=>r(t,n)),n),s=e(o);return h(()=>()=>{o.off(t),m(o,{deep:1})},n),s}function n(e,t){return t.displayName=e,t}function r(t,r){function o(t){let n=l.useRef(t),o=e(s);h(()=>(a({props:n.current,state:s.getState()}),()=>{c({props:n.current,state:s.getState()})}),[]);let u=r(t,o);return n.current=t,u}let s;i.store(t)?s=t:'object'==typeof t&&null!==t?s=y(t):b('shape should be a store or object with stores');let u='Unknown';s&&s.shortName&&(u=s.shortName);let a=d(),c=d();return o.mounted=a,o.unmounted=c,n(u+".View",o)}function o(e){return r(e,({children:e},t)=>e(t))}function s(e,r){let o,s=[];'object'==typeof r&&null!==r?(r.keys&&(s=r.keys),o=r.fn):o=r,i.store(e)||b('expect useList first argument to be a store'),'function'!=typeof o&&b("expect useList's renderItem to be a function"),Array.isArray(s)||b("expect useList's keys to be an array");let u=l.useMemo(()=>{let r=n((e.shortName||'Unknown')+".Item",({index:n,keys:r})=>{let o=t({store:e,keys:[n,...r],fn:(e,t)=>e[t[0]]});return c.current(o,n)});return l.memo(r)},[e]),a=t({store:e,keys:[e],fn:e=>e.length}),c=l.useRef(o);c.current=o;let f=l.useMemo(()=>s,s);return Array.from({length:a},(e,t)=>l.createElement(u,{index:t,key:t,keys:f}))}function u(t,r){return n(`Connect(${r.displayName||r.name||'Unknown'})`,n=>l.createElement(r,Object.assign({},n,e(t))))}function a(e,t={}){let n=l.useRef(null);h(()=>(e.open(n.current),()=>e.close(n.current)),[e]),((e,t)=>{if(e===t)return 1;if('object'==typeof e&&null!==e&&'object'==typeof t&&null!==t){let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return 0;for(let r=0;r<n.length;r++){let o=n[r];if(e[o]!==t[o])return 0}return 1}return 0})(n.current,t)||(n.current=t,e.set(t))}function c(e="gate",t={}){function r(e){return a(r,e),null}let o;'object'==typeof e&&null!==e&&('defaultState'in e&&(t=e.defaultState),e.domain&&(o=e.domain),e=e.name||'gate');let s=p(Boolean(0),{named:'status'}),u=p(t,{named:'state'}),{set:c}=g(u,{set:(e,t)=>t}),{open:f,close:l}=g(s,{open:()=>Boolean(1),close:()=>Boolean(0)});if(r.open=f,r.close=l,r.status=s,r.state=u,r.set=c,u.reset(l),o){let{hooks:e}=o;k({target:[e.store,e.store,e.event,e.event,e.event],params:[s,u,f,l,c]})}return n("Gate:"+e,r)}function f(e){return e}import l from'react';import{is as i,createStore as p,clearNode as m,combine as y,createEvent as d,createApi as g,launch as k}from'effector/effector.mjs';let h='undefined'!=typeof window?l.useLayoutEffect:l.useEffect,b=e=>{throw Error(e)},S=(t,r,o)=>n((t.shortName||'Unknown')+".ContextComponent",n=>{let s=l.useContext(r),u=e(t);return o(n,u,s)}),x=e=>t=>{let n=e;return'function'!=typeof e&&(n=t,t=e),u(t,n)};export{x as connect,r as createComponent,S as createContextComponent,c as createGate,u as createReactState,o as createStoreConsumer,f as useEvent,a as useGate,s as useList,e as useStore,t as useStoreMap};
//# sourceMappingURL=effector-react.mjs.map
