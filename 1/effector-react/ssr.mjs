function e(e){d.store(e)||h('expect useStore argument to be a store');let t=m.useRef(e),r=m.useState(e.getState())[1];return b(()=>(t.current===e&&r(e.getState()),t.current=e,e.updates.watch(r)),[e]),e.getState()}function t({store:t,keys:r,fn:n}){d.store(t)||h('useStoreMap expects a store'),Array.isArray(r)||h('useStoreMap expects an array as keys'),'function'!=typeof n&&h('useStoreMap expects a function');let o=m.useMemo(()=>k(n(t.getState(),r)).on(t,(e,t)=>n(t,r)),r),u=e(o);return b(()=>()=>{o.off(t),x(o,{deep:1})},r),u}function r(e,t){return t.displayName=e,t}function n(e){let t=m.useContext(w);if(!t)throw Error('No scope found, consider adding <Provider> to app root');return t.find(e).meta.wrapped}function o(e,t={}){let r=y(e.open),n=y(e.close),o=y(e.set);((e,t={})=>{let r=m.useRef(null);b(()=>(e.open(r.current),()=>e.close(r.current)),[e]),((e,t)=>{if(e===t)return 1;if('object'==typeof e&&null!==e&&'object'==typeof t&&null!==t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return 0;for(let n=0;n<r.length;n++){let o=r[n];if(e[o]!==t[o])return 0}return 1}return 0})(r.current,t)||(r.current=t,e.set(t))})(m.useMemo(()=>({open:r,close:n,set:o}),[e,r]),t)}function u(e){return t=>{let r=i(e);return t.children(r)}}function s(e,t,r){return n=>{let o=m.useContext(t),u=i(e);return r(n,u,o)}}function f(){throw new Error('not implemented')}function c(e,t){return r(`Connect(${t.displayName||t.name||'Unknown'})`,r=>m.createElement(t,Object.assign({},r,i(e))))}function a(e){return t=>c(t,e)}function i(t){return e(n(t))}function l(e,o){return((e,n)=>{let o,u=[];'object'==typeof n&&null!==n?(n.keys&&(u=n.keys),o=n.fn):o=n,d.store(e)||h('expect useList first argument to be a store'),'function'!=typeof o&&h("expect useList's renderItem to be a function"),Array.isArray(u)||h("expect useList's keys to be an array");let s=m.useMemo(()=>{let n=r((e.shortName||'Unknown')+".Item",({index:r,keys:n})=>{let o=t({store:e,keys:[r,...n],fn:(e,t)=>e[t[0]]});return c.current(o,r)});return m.memo(n)},[e]),f=t({store:e,keys:[e],fn:e=>e.length}),c=m.useRef(o);c.current=o;let a=m.useMemo(()=>u,u);return Array.from({length:f},(e,t)=>m.createElement(s,{index:t,key:t,keys:a}))})(n(e),o)}function p({store:e,keys:r,fn:o}){return t({store:n(e),keys:r,fn:o})}function y(e){let t=m.useContext(w),r=t.find(e),n=d.effect(e)?e=>{let t=(()=>{let e={};return e.req=new Promise((t,r)=>{e.rs=t,e.rj=r}),e})();return g(r,{params:e,req:t}),t.req}:e=>(g(r,e),e);return m.useCallback(n,[t,e])}import m from'react';import{is as d,createStore as k,clearNode as x,launch as g}from'effector/effector.mjs';let b='undefined'!=typeof window?m.useLayoutEffect:m.useEffect,h=e=>{throw Error(e)};const w=m.createContext(null);let{Provider:S}=w;export{S as Provider,a as connect,f as createComponent,s as createContextComponent,c as createReactState,u as createStoreConsumer,y as useEvent,o as useGate,l as useList,i as useStore,p as useStoreMap};
//# sourceMappingURL=ssr.mjs.map
