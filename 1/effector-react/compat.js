'use strict';function e(e){c.is.store(e)||i('expect useStore argument to be a store');var t=s.useRef(e),n=s.useState(e.getState())[1];return f((function(){return t.current===e&&n(e.getState()),t.current=e,e.updates.watch(n)}),[e]),e.getState()}function t(t){var n=t.store,r=t.keys,o=t.fn;c.is.store(n)||i('useStoreMap expects a store'),Array.isArray(r)||i('useStoreMap expects an array as keys'),'function'!=typeof o&&i('useStoreMap expects a function');var u=s.useMemo((function(){return c.createStore(o(n.getState(),r)).on(n,(function(e,t){return o(t,r)}))}),r),a=e(u);return f((function(){return function(){u.off(n),c.clearNode(u,{deep:1})}}),r),a}function n(e,t){return t.displayName=e,t}function r(t,r){function o(t){var n=s.useRef(t),o=e(u);f((function(){return p({props:n.current,state:u.getState()}),function(){l({props:n.current,state:u.getState()})}}),[]);var a=r(t,o);return n.current=t,a}var u;c.is.store(t)?u=t:'object'==typeof t&&null!==t?u=c.combine(t):i('shape should be a store or object with stores');var a='Unknown';u&&u.shortName&&(a=u.shortName);var p=c.createEvent(),l=c.createEvent();return o.mounted=p,o.unmounted=l,n(a+".View",o)}function o(t,r){return n("Connect("+(r.displayName||r.name||'Unknown')+")",(function(n){return s.createElement(r,Object.assign({},n,e(t)))}))}function u(e,t){void 0===t&&(t={});var n=s.useRef(null);f((function(){return e.open(n.current),function(){return e.close(n.current)}}),[e]),function(e,t){if(e===t)return 1;if('object'==typeof e&&null!==e&&'object'==typeof t&&null!==t){var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return 0;for(var o=0;o<n.length;o++){var u=n[o];if(e[u]!==t[u])return 0}return 1}return 0}(n.current,t)||(n.current=t,e.set(t))}Object.defineProperty(exports,'__esModule',{value:1});var a,s=(a=require('react'))&&'object'==typeof a&&'default'in a?a.default:a,c=require('effector/compat'),f='undefined'!=typeof window?s.useLayoutEffect:s.useEffect,i=function(e){throw Error(e)};exports.connect=function(e){return function(t){var n=e;return'function'!=typeof e&&(n=t,t=e),o(t,n)}},exports.createComponent=r,exports.createContextComponent=function(t,r,o){return n((t.shortName||'Unknown')+".ContextComponent",(function(n){var u=s.useContext(r),a=e(t);return o(n,a,u)}))},exports.createGate=function(e,t){function r(e){return u(r,e),null}var o;void 0===e&&(e='gate'),void 0===t&&(t={}),'object'==typeof e&&null!==e&&('defaultState'in e&&(t=e.defaultState),e.domain&&(o=e.domain),e=e.name||'gate');var a=c.createStore(Boolean(0),{named:'status'}),s=c.createStore(t,{named:'state'}),f=c.createApi(s,{set:function(e,t){return t}}).set,i=c.createApi(a,{open:function(){return Boolean(1)},close:function(){return Boolean(0)}}),p=i.open,l=i.close;if(r.open=p,r.close=l,r.status=a,r.state=s,r.set=f,s.reset(l),o){var m=o.hooks;c.launch({target:[m.store,m.store,m.event,m.event,m.event],params:[a,s,p,l,f]})}return n("Gate:"+e,r)},exports.createReactState=o,exports.createStoreConsumer=function(e){return r(e,(function(e,t){return(0,e.children)(t)}))},exports.useEvent=function(e){return e},exports.useGate=u,exports.useList=function(e,r){var o,u=[];'object'==typeof r&&null!==r?(r.keys&&(u=r.keys),o=r.fn):o=r,c.is.store(e)||i('expect useList first argument to be a store'),'function'!=typeof o&&i("expect useList's renderItem to be a function"),Array.isArray(u)||i("expect useList's keys to be an array");var a=s.useMemo((function(){var r=n((e.shortName||'Unknown')+".Item",(function(n){var r=n.index,o=t({store:e,keys:[r].concat(n.keys),fn:function(e,t){return e[t[0]]}});return p.current(o,r)}));return s.memo(r)}),[e]),f=t({store:e,keys:[e],fn:function(e){return e.length}}),p=s.useRef(o);p.current=o;var l=s.useMemo((function(){return u}),u);return Array.from({length:f},(function(e,t){return s.createElement(a,{index:t,key:t,keys:l})}))},exports.useStore=e,exports.useStoreMap=t;
//# sourceMappingURL=compat.js.map
